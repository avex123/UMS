{% extends "base.html" %}
{% load static %}

{% block content %}

    <!-- üõ†Ô∏è Material Cards (Compact with Highlight) -->
    {% if materials %}
    <div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-5 g-3 mb-4">
        {% for material in materials %}
        <div class="col">
            <a href="?material={{ material.id }}" class="text-decoration-none">
                <div class="card shadow-sm border-0 h-100
                    {% if material.id == selected_material_id %} bg-danger text-white {% endif %}"
                    style="border-top: 3px solid {% if material.id == selected_material_id %}#dc3545{% else %}#198754{% endif %};
                        border-radius: 10px;
                        transition: transform 0.15s ease-in-out;
                        min-height: 50px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        text-align: center;">
                    <h6 class="card-title fw-semibold mb-0">
                        {{ material.name }}
                    </h6>
                    <p class="small text-muted mt-1 mb-0">
                        üìè {{ material.length|floatformat:2 }} m
                    </p>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- üß± Stock Type Cards (Larger Images) -->
    {% if stock_types %}
    <div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-5 g-3 mb-4">
        {% for stock in stock_types %}
        <div class="col">
            <a href="?material={{ selected_material_id }}&stock={{ stock.id }}" class="text-decoration-none">
                <div class="card shadow-sm border-0 h-100" style="
                    border-top: 3px solid #dc3545;
                    border-radius: 10px;
                    transition: transform 0.15s ease-in-out;
                    min-height: 200px;">
                    <div class="card-body text-center d-flex flex-column justify-content-between p-2">
                        <div class="mb-2">
                            <img src="{% static 'core/images/'|add:stock.name|add:'.png' %}" 
                                 class="img-fluid"
                                 alt="{{ stock.name }}"
                                 style="max-height: 160px; object-fit: contain;">
                        </div>
                        <h6 class="card-title fw-semibold small mt-1 mb-0">{{ stock.name }}</h6>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- üìã Inventory Table -->
    {% if inventory_items %}
    <div class="card shadow-sm">
        <div class="card-body p-3">
            <h6 class="card-title fw-semibold">Available Inventory</h6>
            <table class="table table-sm table-hover table-bordered mt-2">
                <thead class="table-light">
                    <tr class="small">
                        <th>Serial No.</th>
                        <th>Dimensions</th>
                        <th>Length (m)</th>
                        <!-- üóë Removed Qty and Unit -->
                    </tr>
                </thead>
                <tbody>
                    {% for item in inventory_items %}
                    <tr class="small">
                        <td>{{ item.serial_number|default:"N/A" }}</td>
                        <td>{{ item.dimensions }}</td>
                        <td>{{ item.length|floatformat:2 }}</td>
                        <!-- üóë Removed quantity and unit -->
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% elif selected_stock_id %}
        <div class="alert alert-warning small">No inventory items found for this stock type.</div>
    {% endif %}
</div>
{% endblock %}

{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h3 class="fw-bold">{{ chat.name }}</h3>
    <p class="text-muted">
        {% if chat.chat_type == "group" %}ðŸ“¢ Group Chat{% else %}ðŸ‘¤ Private Chat{% endif %}
    </p>

    <div class="card mb-3" style="max-height: 400px; overflow-y: auto;">
        <div class="card-body">
            {% for message in messages %}
                <p>
                    <strong>{{ message.sender.username }}</strong> 
                    <small class="text-muted">{{ message.timestamp|date:"SHORT_DATETIME_FORMAT" }}</small><br>
                    {{ message.message|linebreaks }}
                    {% if message.file %}
                        <br><a href="{{ message.file.url }}" target="_blank">ðŸ“Ž Download File</a>
                    {% endif %}
                </p>
                <hr>
            {% empty %}
                <p class="text-muted">No messages yet.</p>
            {% endfor %}
        </div>
    </div>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="mb-3">
            <textarea name="message" class="form-control" rows="3" placeholder="Type your message here..."></textarea>
        </div>
        <div class="mb-3">
            <input type="file" name="file" class="form-control">
        </div>
        <button type="submit" class="btn btn-danger">Send</button>
        <a href="{% url 'chat_dashboard' %}" class="btn btn-secondary">Back to Chats</a>
    </form>
</div>
{% endblock %}
